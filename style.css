/* =================== RESET & THEME =================== */
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
  --primary:#FF6B35; --primary-dark:#E55A2B;
  --secondary:#004E89; --secondary-light:#1A659E;
  --accent:#F7B801; --success:#06D6A0; --danger:#dc2626;
  --bg:#0A0E27; --bg-light:#1a1f3a;
  --card-bg:rgba(255,255,255,.05); --border:rgba(255,255,255,.1);
  --text:#fff; --text-secondary:#B8C5D6;
  --zoom:1;

  /* Gradient slot orari */
  --morning-grad: linear-gradient(135deg,#4da3ff,#5bc0eb);
  --afternoon-grad: linear-gradient(135deg,var(--primary),var(--accent));

  /* Altezza minima slot orari */
  --slot-h: 196px;
  /* Raggi per carte */
  --radius: 20px;
}

body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  background:var(--bg); color:var(--text);
  overflow-x:hidden; min-height:100vh; position:relative;
  padding-bottom: env(safe-area-inset-bottom, 0);
  touch-action: manipulation;
}

/* Sfondo animato soft */
body::before{
  content:''; position:fixed; top:-50%; left:-50%; width:200%; height:200%;
  background:
    radial-gradient(circle at 20% 50%,rgba(255,107,53,.15)0%,transparent 50%),
    radial-gradient(circle at 80% 80%,rgba(0,78,137,.15)0%,transparent 50%),
    radial-gradient(circle at 40% 20%,rgba(247,184,1,.1)0%,transparent 50%);
  animation:drift 20s ease-in-out infinite; z-index:0;
}
@keyframes drift{
  0%,100%{transform:translate(0,0) rotate(0)}
  33%{transform:translate(30px,-30px) rotate(5deg)}
  66%{transform:translate(-20px,20px) rotate(-5deg)}
}

/* =================== CONTAINER CON AUTO-SCALE =================== */
.container{
  display: none; /* Nascosto di default, mostrato da JS dopo il login */
  position:relative; z-index:1; max-width:480px; margin:0 auto; min-height:100vh;
  transform: scale(var(--zoom)); transform-origin: top center;
  width: calc(100vw / var(--zoom)); min-height: calc(100vh / var(--zoom));
  will-change: transform,width;
}

/* =================== HEADER =================== */
.header{ background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%); padding:60px 24px 40px; border-radius:0 0 32px 32px; box-shadow:0 10px 40px rgba(255,107,53,.3); position:relative; overflow:hidden; }
.header::before{content:''; position:absolute; top:-50%; right:-20%; width:200px; height:200px; background:rgba(255,255,255,.1); border-radius:50%; animation:float 6s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-20px) scale(1.1)}}
.header h1{font-size:28px; font-weight:800; margin-bottom:8px}
.header .subtitle{color:rgba(255,255,255,.9); font-size:16px; font-weight:500}
.user-info { display: flex; align-items: center; justify-content: space-between; margin-top: 16px; }
.user-badge{display:inline-flex; align-items:center; gap:8px; background:rgba(255,255,255,.2); backdrop-filter:blur(10px); padding:8px 16px; border-radius:20px; font-size:14px; font-weight:600}
#logoutBtn { background: rgba(220, 38, 38, 0.5); border: 1px solid var(--danger); color: white; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 14px; transition: .2s; }
#logoutBtn:hover { background: var(--danger); transform: scale(1.05); }
.content{padding:24px}

/* =================== STEPS =================== */
.step-indicator{display:flex; justify-content:space-between; margin-bottom:32px; padding:0 8px}
.step{flex:1; height:4px; background:var(--card-bg); border-radius:4px; margin:0 4px; position:relative; overflow:hidden; transition:.3s}
.step.active{background:linear-gradient(90deg,var(--primary),var(--accent))}
.step.active::after{content:''; position:absolute; top:0; left:0; height:100%; width:30%; background:rgba(255,255,255,.5); animation:shimmer 1.5s infinite}
@keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(400%)}}

/* =================== CARDS =================== */
.card{
  background:var(--card-bg); backdrop-filter:blur(20px);
  border:1px solid var(--border); border-radius:24px;
  padding:24px; margin-bottom:20px; box-shadow:0 8px 32px rgba(0,0,0,.2);
  position: relative; z-index: 2;
}
.card-title{font-size:18px; font-weight:700; margin-bottom:16px; display:flex; align-items:center; gap:10px}
.card-title .icon{font-size:24px}

/* =================== SELETTORE DATA =================== */
.date-selector{display:grid; grid-template-columns:repeat(7,1fr); gap:8px; margin-top:16px}
.date-day{ aspect-ratio:1; display:flex; flex-direction:column; align-items:center; justify-content:center; background:var(--card-bg); border:2px solid transparent; border-radius:12px; cursor:pointer; transition:.3s; font-size:14px; }
.date-day .day-name{font-size:10px; color:var(--text-secondary); margin-bottom:4px; text-transform:uppercase; font-weight:600}
.date-day .day-num{font-size:16px; font-weight:700}
.date-day:hover{border-color:var(--primary); transform:scale(1.05)}
.date-day.selected{background:linear-gradient(135deg,var(--primary),var(--accent)); border-color:transparent; transform:scale(1.05); box-shadow:0 4px 20px rgba(255,107,53,.4)}
.date-day.today{border-color:var(--success)}
.date-day.weekend:not(.selected), .date-day.holiday:not(.selected){background: rgba(220, 38, 38, 0.12); border-color: rgba(220, 38, 38, 0.35);}

/* =================== ORARI DI LAVORO =================== */
.time-picker{display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-top:16px}
.time-slot{ position:relative; overflow:hidden; border-radius:var(--radius); border:2px solid var(--border); box-shadow:0 8px 24px rgba(0,0,0,.15); min-height:var(--slot-h); padding:14px; background:var(--bg-light); }
.time-slot.morning .slot-bg{background:var(--morning-grad)}
.time-slot.afternoon .slot-bg{background:var(--afternoon-grad)}
.slot-bg{ position:absolute; inset:0; opacity:.9; border-radius:calc(var(--radius) - 2px); }
.slot-inner{ position:relative; z-index:1; display:grid; grid-template-rows:auto auto 1fr; gap:10px; height:100%; }
.slot-head{display:flex; align-items:center; gap:10px}
.slot-head .icon{font-size:28px}
.slot-head .label{font-size:14px; font-weight:700; letter-spacing:.2px}
.slot-time{font-size:20px; font-weight:800}
.time-inputs{ align-self:end; display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.time-inputs input[type="time"]{ width:100%; background:rgba(0,0,0,.25); border:2px solid rgba(255,255,255,.35); color:#fff; border-radius:12px; padding:10px 12px; font-size:16px; outline:none; transition:.2s; box-sizing:border-box; }
.time-inputs input[type="time"]:focus{border-color:#fff; box-shadow:0 0 0 3px rgba(255,255,255,.25)}
.time-inputs input[type="time"]::-webkit-datetime-edit{padding:0}
.time-inputs input[type="time"]::-webkit-datetime-edit-fields-wrapper{display:flex; justify-content:center}
.time-inputs input[type="time"]::-webkit-datetime-edit-hour-field,
.time-inputs input[type="time"]::-webkit-datetime-edit-minute-field{padding:0 2px}
.time-inputs input[type="time"]::-webkit-inner-spin-button{display:none}
.time-inputs input[type="time"]::-webkit-calendar-picker-indicator{opacity:.9; margin-left:6px}

/* =================== INPUT GENERICI =================== */
.input-group{position:relative; margin-top:16px}
.input-group input,.input-group textarea,.input-group select{ width:100%; background:var(--bg-light); border:2px solid var(--border); border-radius:16px; padding:16px 20px 16px 50px; font-size:16px; color:var(--text); font-family:inherit; transition:.3s; }
.input-group select{padding-left:50px; appearance:none}
.input-group textarea{resize:vertical; min-height:100px}
.input-group input:focus,.input-group textarea:focus,.input-group select:focus{outline:none; border-color:var(--primary); box-shadow:0 0 0 4px rgba(255,107,53,.1)}
.input-group .input-icon{position:absolute; left:18px; top:50%; transform:translateY(-50%); font-size:20px; color:var(--text-secondary)}
.input-group textarea + .input-icon{top:20px; transform:none}

/* =================== BOTTONI =================== */
.btn-group{display:flex; gap:12px; margin-top:24px}
.btn{ flex:1; background:linear-gradient(135deg,var(--primary),var(--primary-dark)); border:none; border-radius:16px; padding:18px; font-size:16px; font-weight:700; color:var(--text); cursor:pointer; transition:.3s cubic-bezier(.4,0,.2,1); box-shadow:0 4px 16px rgba(255,107,53,.3); display:flex; align-items:center; justify-content:center; gap:8px }
.btn-secondary{background:var(--card-bg); border:2px solid var(--border); box-shadow:none}
.btn-success{background:linear-gradient(135deg,var(--success),#05b78b)}
.btn:hover{transform:translateY(-2px); box-shadow:0 8px 24px rgba(255,255,255,.4)}

/* =================== RIEPILOGO =================== */
.summary-card{background:linear-gradient(135deg,var(--secondary),var(--secondary-light)); border:none; padding:28px}
.summary-row{display:flex; justify-content:space-between; align-items:center; padding:16px 0; border-bottom:1px solid rgba(255,255,255,.1)}
.summary-row:last-child{border-bottom:none; padding-bottom:0}
.summary-label{font-size:14px; color:var(--text-secondary); font-weight:600}
.summary-value{font-size:18px; font-weight:700}
.summary-works{display:flex; flex-direction:column; gap:10px}
.summary-work{display:flex; flex-direction:column; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15); border-radius:12px; padding:10px}
.summary-work .line{display:flex; justify-content:space-between; gap:8px}
.summary-work .label{color:var(--text-secondary); font-size:12px}
.summary-work .value{font-weight:700}

/* =================== PRESENZE MESE (toggle) =================== */
.month-toggle{display:flex; align-items:center; justify-content:space-between; gap:12px; background:var(--card-bg); border:1px dashed var(--border); border-radius:16px; padding:14px 16px; cursor:pointer}
.month-toggle span{font-weight:700}
.month-list{display:none; flex-direction:column; gap:12px; margin-top:12px}
.month-list.open{display:flex}
.month-item{display:flex; align-items:center; justify-content:space-between; gap:12px; background:var(--bg-light); border:1px solid var(--border); border-radius:16px; padding:12px 14px}
.mi-left{display:flex; align-items:center; gap:12px}
.mi-date{min-width:54px; text-align:center; font-weight:800; background:rgba(255,255,255,.05); border:1px solid var(--border); border-radius:12px; padding:6px 8px}
.mi-main{display:flex; flex-direction:column}
.mi-cant{font-weight:700}
.mi-lav{font-size:13px; color:var(--text-secondary)}
.mi-ore{font-weight:800}
.mi-btn{background:linear-gradient(135deg,var(--secondary),var(--secondary-light)); border:none; border-radius:12px; color:#fff; padding:8px 12px; cursor:pointer}
.month-item.weekend, .month-item.holiday{ background:linear-gradient(0deg, rgba(220, 38, 38, 0.12), rgba(220, 38, 38, 0.12)), var(--bg-light); border-color: rgba(220, 38, 38, 0.35); }

/* =================== CANTIERI MULTIPLI =================== */
.work-item{background:var(--card-bg); border:1px solid var(--border); border-radius:16px; padding:14px; margin-top:12px}
.work-item-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px}
.work-item-title{font-weight:800; font-size:14px; color:#fff}
.work-item-remove{background:transparent; border:1px solid var(--border); color:#fff; border-radius:10px; padding:6px 10px; cursor:pointer; font-size:12px}
.add-work-btn{margin-top:12px; width:100%; background:linear-gradient(135deg,var(--secondary),var(--secondary-light)); color:#fff; border:none; border-radius:14px; padding:12px; font-weight:800; cursor:pointer}
.work-item .input-group{margin-top:10px}

/* =================== MODALE SUCCESSO =================== */
.success-overlay{position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(10,14,39,.95); backdrop-filter:blur(10px); display:none; align-items:center; justify-content:center; z-index:1000; animation:fadeIn .3s ease}
.success-overlay.show{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.success-content{text-align:center; animation:popIn .5s cubic-bezier(.68,-.55,.265,1.55)}
@keyframes popIn{0%{transform:scale(0);opacity:0}100%{transform:scale(1);opacity:1}}
.success-icon{font-size:80px; margin-bottom:20px; animation:bounce 1s ease}
@keyframes bounce{0%,20%,50%,80%,100%{transform:translateY(0)}40%{transform:translateY(-30px)}60%{transform:translateY(-15px)}}
.success-title{font-size:28px; font-weight:800; margin-bottom:12px}
.success-message{font-size:16px; color:var(--text-secondary)}

/* =================== PAGINE =================== */
.page{display:none}
.page.active{display:block; animation:fadeIn .3s ease}

/* Pagina Login */
.login-container { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
.login-card { max-width: 400px; width: 100%; }


@media (max-width:480px){
  .header{padding:48px 20px 32px}
  .content{padding:20px}
  .card{padding:20px}
}
