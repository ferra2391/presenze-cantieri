<!DOCTYPE html>
<html lang="it">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  <title>Presenze Cantiere</title>

Â  <style>
Â  Â  /* =================== RESET & THEME =================== */
Â  Â  *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
Â  Â  :root{
Â  Â  Â  --primary:#FF6B35; --primary-dark:#E55A2B;
Â  Â  Â  --secondary:#004E89; --secondary-light:#1A659E;
Â  Â  Â  --accent:#F7B801; --success:#06D6A0; --danger:#dc2626;
Â  Â  Â  --bg:#0A0E27; --bg-light:#1a1f3a;
Â  Â  Â  --card-bg:rgba(255,255,255,.05); --border:rgba(255,255,255,.1);
Â  Â  Â  --text:#fff; --text-secondary:#B8C5D6;
Â  Â  Â  --zoom:1;
Â  Â  Â  --morning-grad: linear-gradient(135deg,#4da3ff,#5bc0eb);
Â  Â  Â  --afternoon-grad: linear-gradient(135deg,var(--primary),var(--accent));
Â  Â  Â  --slot-h: 196px;
Â  Â  Â  --radius: 20px;
Â  Â  }
Â  Â  body{
Â  Â  Â  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
Â  Â  Â  background:var(--bg); color:var(--text);
Â  Â  Â  overflow-x:hidden; min-height:100vh; position:relative;
Â  Â  Â  padding-bottom: env(safe-area-inset-bottom, 0);
Â  Â  Â  touch-action: manipulation;
Â  Â  }
Â  Â  body::before{
Â  Â  Â  content:''; position:fixed; top:-50%; left:-50%; width:200%; height:200%;
Â  Â  Â  background:
Â  Â  Â  Â  radial-gradient(circle at 20% 50%,rgba(255,107,53,.15)0%,transparent 50%),
Â  Â  Â  Â  radial-gradient(circle at 80% 80%,rgba(0,78,137,.15)0%,transparent 50%),
Â  Â  Â  Â  radial-gradient(circle at 40% 20%,rgba(247,184,1,.1)0%,transparent 50%);
Â  Â  Â  animation:drift 20s ease-in-out infinite; z-index:0;
Â  Â  }
Â  Â  @keyframes drift{ 0%,100%{transform:translate(0,0) rotate(0)} 33%{transform:translate(30px,-30px) rotate(5deg)} 66%{transform:translate(-20px,20px) rotate(-5deg)} }
Â  Â  .container{
      display: none; /* Nascosto di default, mostrato da JS dopo il login */
Â  Â  Â  position:relative; z-index:1; max-width:480px; margin:0 auto; min-height:100vh;
Â  Â  Â  transform: scale(var(--zoom)); transform-origin: top center;
Â  Â  Â  width: calc(100vw / var(--zoom)); min-height: calc(100vh / var(--zoom));
Â  Â  Â  will-change: transform,width;
Â  Â  }
Â  Â  .header{ background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%); padding:60px 24px 40px; border-radius:0 0 32px 32px; box-shadow:0 10px 40px rgba(255,107,53,.3); position:relative; overflow:hidden; }
Â  Â  .header::before{content:''; position:absolute; top:-50%; right:-20%; width:200px; height:200px; background:rgba(255,255,255,.1); border-radius:50%; animation:float 6s ease-in-out infinite}
Â  Â  @keyframes float{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-20px) scale(1.1)}}
Â  Â  .header h1{font-size:28px; font-weight:800; margin-bottom:8px}
Â  Â  .header .subtitle{color:rgba(255,255,255,.9); font-size:16px; font-weight:500}
Â  Â  .user-info { display: flex; align-items: center; justify-content: space-between; margin-top: 16px; }
Â  Â  .user-badge{display:inline-flex; align-items:center; gap:8px; background:rgba(255,255,255,.2); backdrop-filter:blur(10px); padding:8px 16px; border-radius:20px; font-size:14px; font-weight:600}
Â  Â  #logoutBtn { background: rgba(220, 38, 38, 0.5); border: 1px solid var(--danger); color: white; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 14px; transition: .2s; }
    #logoutBtn:hover { background: var(--danger); transform: scale(1.05); }
Â  Â  .content{padding:24px}
    /* ... il resto del tuo CSS rimane esattamente lo stesso ... */
Â  </style>
</head>
<body>
Â  <!-- Il container principale dell'app. Inizialmente Ã¨ nascosto. -->
Â  <div class="container" id="appContainer">
Â  Â  <!-- ===== HEADER ===== -->
Â  Â  <div class="header">
Â  Â  Â  <h1>âš¡ Presenze Cantiere</h1>
Â  Â  Â  <p class="subtitle">Registra la tua giornata lavorativa</p>
      <div class="user-info">
        <div class="user-badge"><span>ğŸ‘·</span><span id="userName">Caricamento...</span></div>
        <button id="logoutBtn">Logout</button>
      </div>
Â  Â  </div>

Â  Â  <div class="content">
Â  Â  Â  <!-- Progress bar a step -->
Â  Â  Â  <div class="step-indicator"><div class="step active"></div><div class="step"></div><div class="step"></div><div class="step"></div></div>

Â  Â  Â  <!-- ===== Pagina 1: Seleziona data + Lista mese (toggle) ===== -->
Â  Â  Â  <div class="page active" id="page1">
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <div class="card-title"><span class="icon">ğŸ“…</span><span>Seleziona la data</span></div>
Â  Â  Â  Â  Â  <div class="date-selector" id="dateSelector"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <div class="month-toggle" id="monthToggle">
Â  Â  Â  Â  Â  Â  <span id="monthTitle">ğŸ“† Presenze del mese</span>
Â  Â  Â  Â  Â  Â  <strong id="monthToggleArrow">â–¼</strong>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div id="monthList" class="month-list"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="btn-group">
Â  Â  Â  Â  Â  <button class="btn" onclick="nextPage(2)">Avanti <span>â†’</span></button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <!-- ===== Pagina 2: Orari di lavoro ===== -->
Â  Â  Â  <div class="page" id="page2">
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <div class="card-title"><span class="icon">â°</span><span>Orario di lavoro</span></div>
Â  Â  Â  Â  Â  <div class="time-picker">
Â  Â  Â  Â  Â  Â  <div class="time-slot morning">
Â  Â  Â  Â  Â  Â  Â  <div class="slot-bg"></div>
Â  Â  Â  Â  Â  Â  Â  <div class="slot-inner">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="slot-head"><span class="icon">â˜€ï¸</span><div class="label">Mattina</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="slot-time" id="morningText">08:00 - 12:00</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="time-inputs">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" id="mStart" value="08:00" min="07:00" max="15:00" step="1800" oninput="updateTimes()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" id="mEnd" Â  value="12:00" min="07:00" max="15:00" step="1800" oninput="updateTimes()">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="time-slot afternoon">
Â  Â  Â  Â  Â  Â  Â  <div class="slot-bg"></div>
Â  Â  Â  Â  Â  Â  Â  <div class="slot-inner">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="slot-head"><span class="icon">ğŸŒ™</span><div class="label">Pomeriggio</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="slot-time" id="afternoonText">13:00 - 17:00</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="time-inputs">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" id="pStart" value="13:00" min="12:00" max="20:00" step="1800" oninput="updateTimes()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" id="pEnd" Â  value="17:00" min="12:00" max="20:00" step="1800" oninput="updateTimes()">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div style="margin-top:16px;padding:16px;background:var(--bg-light);border-radius:16px;text-align:center;">
Â  Â  Â  Â  Â  Â  <div style="color:var(--text-secondary);font-size:14px;margin-bottom:4px;">Ore totali</div>
Â  Â  Â  Â  Â  Â  <div style="font-size:32px;font-weight:800;color:var(--accent);" id="totalHours">8.0h</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="btn-group">
Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="prevPage(1)"><span>â†</span>Indietro</button>
Â  Â  Â  Â  Â  <button class="btn" onclick="nextPage(3)">Avanti <span>â†’</span></button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <!-- ===== Pagina 3: Cantieri multipli (max 3) ===== -->
Â  Â  Â  <div class="page" id="page3">
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <div class="card-title"><span class="icon">ğŸ—ï¸</span><span>Cantieri</span></div>
Â  Â  Â  Â  Â  <div id="workItems"></div>
Â  Â  Â  Â  Â  <button class="add-work-btn" id="addWorkBtn" onclick="addWorkItem()">+ Aggiungi cantiere (max 3)</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="btn-group">
Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="prevPage(2)"><span>â†</span>Indietro</button>
Â  Â  Â  Â  Â  <button class="btn" onclick="nextPage(4)">Avanti <span>â†’</span></button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <!-- ===== Pagina 4: Riepilogo + Note ===== -->
Â  Â  Â  <div class="page" id="page4">
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <div class="card-title"><span class="icon">ğŸ—’ï¸</span><span>Note</span></div>
Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  <span class="input-icon">âœï¸</span>
Â  Â  Â  Â  Â  Â  <textarea id="notesInput" placeholder="Aggiungi eventuali note (facoltative)..." oninput="updateSummary()"></textarea>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="card summary-card">
Â  Â  Â  Â  Â  <div class="card-title" style="color:#fff;margin-bottom:20px;"><span class="icon">ğŸ“‹</span><span>Riepilogo</span></div>
Â  Â  Â  Â  Â  <div class="summary-row"><span class="summary-label">Data</span><span class="summary-value" id="summaryDate">Oggi</span></div>
Â  Â  Â  Â  Â  <div class="summary-row"><span class="summary-label">Orario</span><span class="summary-value" id="summaryTime">08:00 - 17:00</span></div>
Â  Â  Â  Â  Â  <div style="margin-top:10px"></div>
Â  Â  Â  Â  Â  <div class="summary-row" style="border:none;display:block;padding-top:0;">
Â  Â  Â  Â  Â  Â  <div class="summary-label" style="margin-bottom:8px">Cantieri & lavorazioni</div>
Â  Â  Â  Â  Â  Â  <div class="summary-works" id="summaryWorks"></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="summary-row"><span class="summary-label">Note</span><span class="summary-value" id="summaryNotes">-</span></div>
Â  Â  Â  Â  Â  <div class="summary-row"><span class="summary-label">Ore totali</span><span class="summary-value" style="color:var(--accent);" id="summaryHours">8.0h</span></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="btn-group">
Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="prevPage(3)"><span>â†</span>Indietro</button>
Â  Â  Â  Â  Â  <button class="btn btn-success" onclick="submitPresence()"><span>âœ“</span>Conferma</button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <!-- Modale successo -->
Â  <div class="success-overlay" id="successOverlay">
Â  Â  <div class="success-content">
Â  Â  Â  <div class="success-icon">âœ¨</div>
Â  Â  Â  <div class="success-title">Presenza registrata!</div>
Â  Â  Â  <div class="success-message">La tua giornata Ã¨ stata salvata con successo</div>
Â  Â  </div>
Â  </div>

Â  <!-- Tutto il Javascript Ã¨ stato spostato in main.js -->
Â  <script type="module" src="main.js"></script>
</body>
</html>

