<!DOCTYPE html>

<html lang="it">

<head>

Â  Â  <meta charset="UTF-8" />

Â  Â  <title>Presenze Cantiere</title>

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

Â  Â  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

Â  Â  <style>

Â  Â  Â  Â  /* Variabili CSS per una gestione piÃ¹ semplice dei colori e stili */

Â  Â  Â  Â  :root {

Â  Â  Â  Â  Â  Â  --color-primary: hsl(210, 100%, 40%); /* Blu principale */

Â  Â  Â  Â  Â  Â  --color-primary-dark: hsl(210, 100%, 30%); /* Blu piÃ¹ scuro */

Â  Â  Â  Â  Â  Â  --color-accent: hsl(140, 60%, 40%); /* Verde per azioni positive */

Â  Â  Â  Â  Â  Â  --color-accent-dark: hsl(140, 60%, 30%); /* Verde piÃ¹ scuro */

Â  Â  Â  Â  Â  Â  --color-warning: hsl(40, 90%, 60%); /* Giallo per avvisi */

Â  Â  Â  Â  Â  Â  --color-text-dark: hsl(210, 10%, 20%); /* Testo scuro */

Â  Â  Â  Â  Â  Â  --color-text-light: hsl(210, 5%, 50%); /* Testo grigio chiaro */

Â  Â  Â  Â  Â  Â  --color-bg-light: hsl(210, 20%, 98%); /* Sfondo chiaro generale */

Â  Â  Â  Â  Â  Â  --color-bg-alt: hsl(210, 10%, 95%); /* Grigio leggero per sezioni */

Â  Â  Â  Â  Â  Â  --color-border: hsl(210, 15%, 85%); /* Bordo sottile */

Â  Â  Â  Â  Â  Â  --color-success-bg: hsl(140, 60%, 95%); /* Sfondo verde chiaro per successo */

Â  Â  Â  Â  Â  Â  --color-success-border: hsl(140, 60%, 75%); /* Bordo verde per successo */

Â  Â  Â  Â  Â  Â  --color-warning-bg: hsl(40, 90%, 95%); /* Sfondo giallo chiaro per avvisi */

Â  Â  Â  Â  Â  Â  --color-warning-border: hsl(40, 90%, 80%); /* Bordo giallo per avvisi */



Â  Â  Â  Â  Â  Â  --border-radius-base: 8px; /* Raggio dei bordi standard */

Â  Â  Â  Â  Â  Â  --shadow-light: 0 1px 3px rgba(0,0,0,0.05);

Â  Â  Â  Â  Â  Â  --shadow-medium: 0 4px 8px rgba(0,0,0,0.1);

Â  Â  Â  Â  Â  Â  --shadow-strong: 0 8px 16px rgba(0,0,0,0.15);

Â  Â  Â  Â  }



Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: 'Roboto', sans-serif;

Â  Â  Â  Â  Â  Â  background: var(--color-bg-light);

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  }



Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  max-width: 500px;

Â  Â  Â  Â  Â  Â  margin: 0 auto;

Â  Â  Â  Â  Â  Â  padding: 0 10px;

Â  Â  Â  Â  }



Â  Â  Â  Â  h2, h3 {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  color: var(--color-primary-dark);

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  input, select, button {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  padding: 14px;

Â  Â  Â  Â  Â  Â  margin: 10px 0;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-border);

Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius-base);

Â  Â  Â  Â  Â  Â  box-sizing: border-box;

Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-light);

Â  Â  Â  Â  }



Â  Â  Â  Â  input:focus, select:focus, button:focus {

Â  Â  Â  Â  Â  Â  outline: none;

Â  Â  Â  Â  Â  Â  border-color: var(--color-primary);

Â  Â  Â  Â  Â  Â  box-shadow: 0 0 0 3px hsla(210, 100%, 40%, 0.2);

Â  Â  Â  Â  }



Â  Â  Â  Â  button {

Â  Â  Â  Â  Â  Â  background-color: var(--color-primary);

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;

Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-medium);

Â  Â  Â  Â  }



Â  Â  Â  Â  button:hover {

Â  Â  Â  Â  Â  Â  background-color: var(--color-primary-dark);

Â  Â  Â  Â  Â  Â  transform: translateY(-2px);

Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-strong);

Â  Â  Â  Â  }



Â  Â  Â  Â  #form {

Â  Â  Â  Â  Â  Â  margin-top: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  #benvenuto {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  Â  Â  font-size: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  #btnInvia {

Â  Â  Â  Â  Â  Â  background: linear-gradient(to right, var(--color-accent), var(--color-accent-dark));

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  border-radius: 10px; /* leggermente piÃ¹ arrotondato */

Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Ombra piÃ¹ pronunciata */

Â  Â  Â  Â  }

Â  Â  Â  Â  #btnInvia:hover {

Â  Â  Â  Â  Â  Â  background: linear-gradient(to right, var(--color-accent-dark), hsl(140, 60%, 25%));

Â  Â  Â  Â  Â  Â  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25);

Â  Â  Â  Â  }



Â  Â  Â  Â  .section-label {

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  Â  Â  margin-top: 15px;

Â  Â  Â  Â  Â  Â  display: block; /* Per assicurare che il margine funzioni */

Â  Â  Â  Â  Â  Â  margin-bottom: 5px; /* Spazio sotto l'etichetta */

Â  Â  Â  Â  }



Â  Â  Â  Â  .card { /* Stile generico per le card */

Â  Â  Â  Â  Â  Â  background-color: white;

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius-base);

Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-medium);

Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-border);

Â  Â  Â  Â  Â  Â  margin-top: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  #importaBox {

Â  Â  Â  Â  Â  Â  background: var(--color-success-bg);

Â  Â  Â  Â  Â  Â  padding: 16px;

Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius-base);

Â  Â  Â  Â  Â  Â  margin-top: 10px;

Â  Â  Â  Â  Â  Â  margin-bottom: 10px;

Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-light);

Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-success-border);

Â  Â  Â  Â  }



Â  Â  Â  Â  #importaBox h4 {

Â  Â  Â  Â  Â  Â  margin-top: 0;

Â  Â  Â  Â  Â  Â  margin-bottom: 6px;

Â  Â  Â  Â  Â  Â  color: var(--color-accent-dark);

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  }



Â  Â  Â  Â  #importaBox .sottotitolo {

Â  Â  Â  Â  Â  Â  margin: 0 0 12px 0;

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  Â  Â  color: var(--color-text-light);

Â  Â  Â  Â  }



Â  Â  Â  Â  .importa-riga {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 12px;

Â  Â  Â  Â  Â  Â  flex-wrap: wrap;

Â  Â  Â  Â  }



Â  Â  Â  Â  #importaBox input[list] {

Â  Â  Â  Â  Â  Â  flex: 1 1 250px;

Â  Â  Â  Â  Â  Â  padding: 12px;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-border);

Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius-base);

Â  Â  Â  Â  Â  Â  background: #fff;

Â  Â  Â  Â  }



Â  Â  Â  Â  #ultimaLavorazioneBox {

Â  Â  Â  Â  Â  Â  background-color: #f0f7ff; /* Sfondo leggermente blu */

Â  Â  Â  Â  Â  Â  padding: 12px 15px;

Â  Â  Â  Â  Â  Â  border: 1px solid #cce0ff;

Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius-base);

Â  Â  Â  Â  Â  Â  margin: 15px 0;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-light);

Â  Â  Â  Â  }

Â  Â  Â  Â  #ultimaLavorazioneBox p {

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  Â  Â  color: var(--color-text-light);

Â  Â  Â  Â  }

Â  Â  Â  Â  #ultimaLavorazioneBox strong {

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  color: var(--color-primary-dark);

Â  Â  Â  Â  }





Â  Â  Â  Â  #btnGestione {

Â  Â  Â  Â  Â  Â  background-color: var(--color-primary);

Â  Â  Â  Â  Â  Â  border-radius: 10px;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  }



Â  Â  Â  Â  ul {

Â  Â  Â  Â  Â  Â  padding-left: 20px;

Â  Â  Â  Â  }

Â  Â  Â  Â  li {

Â  Â  Â  Â  Â  Â  margin-bottom: 6px;

Â  Â  Â  Â  }



Â  Â  Â  Â  #cantiere { /* Non usato in questo HTML, ma per coerenza */

Â  Â  Â  Â  Â  Â  border: 2px solid var(--color-primary);

Â  Â  Â  Â  Â  Â  background-color: #eef4ff;

Â  Â  Â  Â  Â  Â  font-weight: bold;

Â  Â  Â  Â  Â  Â  color: var(--color-primary-dark);

Â  Â  Â  Â  }

Â  Â  Â  Â  #btnCantiereAltro {

Â  Â  Â  Â  Â  Â  background-color: var(--color-bg-alt);

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  Â  Â  font-weight: normal;

Â  Â  Â  Â  Â  Â  box-shadow: none;

Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-border);

Â  Â  Â  Â  }

Â  Â  Â  Â  #btnCantiereAltro:hover {

Â  Â  Â  Â  Â  Â  background-color: var(--color-border);

Â  Â  Â  Â  Â  Â  transform: none;

Â  Â  Â  Â  Â  Â  box-shadow: none;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per la notifica (snackbar) */

Â  Â  Â  Â  #notifica {

Â  Â  Â  Â  Â  Â  display: none;

Â  Â  Â  Â  Â  Â  position: fixed;

Â  Â  Â  Â  Â  Â  bottom: 30px;

Â  Â  Â  Â  Â  Â  left: 50%;

Â  Â  Â  Â  Â  Â  transform: translateX(-50%) translateY(50px) scale(0.9); /* Inizia piÃ¹ in basso e piÃ¹ piccolo */

Â  Â  Â  Â  Â  Â  opacity: 0;

Â  Â  Â  Â  Â  Â  background-color: var(--color-accent);

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  padding: 16px 30px;

Â  Â  Â  Â  Â  Â  border-radius: 12px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 8px 16px rgba(0,0,0,0.3);

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  Â  Â  z-index: 99999;

Â  Â  Â  Â  Â  Â  transition: all 0.5s ease-out; /* Animazione piÃ¹ fluida */

Â  Â  Â  Â  }

Â  Â  Â  Â  #notifica.show { /* Classe per mostrare la notifica */

Â  Â  Â  Â  Â  Â  transform: translateX(-50%) translateY(0) scale(1);

Â  Â  Â  Â  Â  Â  opacity: 1;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per la modale di conferma */

#modalConferma {

Â  Â  display: none; /* Questa riga Ã¨ la chiave! */

Â  Â  position: fixed;

Â  Â  top: 0;

Â  Â  left: 0;

Â  Â  width: 100%;

Â  Â  height: 100%;

Â  Â  background-color: rgba(0,0,0,0.5);

Â  Â  z-index: 9999;

Â  Â  /* Le prossime due proprietÃ  servono solo quando Ã¨ 'display: flex;' */

Â  Â  /* justify-content: center; */

Â  Â  /* align-items: center; */

}

Â  Â  Â  Â  #modalConferma.show > div { /* Animazione di ingresso */

Â  Â  Â  Â  Â  Â  transform: scale(1);

Â  Â  Â  Â  Â  Â  opacity: 1;

Â  Â  Â  Â  }

Â  Â  Â  Â  #modalConferma .chiudi-btn {

Â  Â  Â  Â  Â  Â  position: absolute;

Â  Â  Â  Â  Â  Â  top: 15px;

Â  Â  Â  Â  Â  Â  right: 15px;

Â  Â  Â  Â  Â  Â  background: none;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  font-size: 28px; /* PiÃ¹ grande */

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  color: var(--color-text-light);

Â  Â  Â  Â  Â  Â  padding: 5px; /* Area cliccabile piÃ¹ ampia */

Â  Â  Â  Â  Â  Â  transition: color 0.2s ease;

Â  Â  Â  Â  }

Â  Â  Â  Â  #modalConferma .chiudi-btn:hover {

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  }

Â  Â  Â  Â  #modalConferma p {

Â  Â  Â  Â  Â  Â  font-size: 18px;

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoDati {

Â  Â  Â  Â  Â  Â  background-color: var(--color-bg-alt);

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius-base);

Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-border);

Â  Â  Â  Â  Â  Â  margin-top: 15px;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  text-align: left; /* Assicurati che il testo sia allineato a sinistra */

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  Â  Â  font-size: 15px;

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoDati ul {

Â  Â  Â  Â  Â  Â  padding-left: 15px;

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  Â  Â  list-style: none; /* Rimuovi i pallini di default */

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoDati li {

Â  Â  Â  Â  Â  Â  margin-bottom: 8px;

Â  Â  Â  Â  Â  Â  padding-left: 0;

Â  Â  Â  Â  Â  Â  line-height: 1.4;

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoDati ul ul { /* Per i dettagli dei cantieri annidati */

Â  Â  Â  Â  Â  Â  margin-top: 5px;

Â  Â  Â  Â  Â  Â  padding-left: 20px;

Â  Â  Â  Â  }

Â  Â  Â  Â  #modalConferma button {

Â  Â  Â  Â  Â  Â  padding: 10px 25px;

Â  Â  Â  Â  Â  Â  margin: 0 8px;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-light); /* Ombra piÃ¹ leggera per i bottoni della modale */

Â  Â  Â  Â  }

Â  Â  Â  Â  #modalConferma button:first-of-type { /* Conferma */

Â  Â  Â  Â  Â  Â  background-color: var(--color-accent);

Â  Â  Â  Â  }

Â  Â  Â  Â  #modalConferma button:first-of-type:hover {

Â  Â  Â  Â  Â  Â  background-color: var(--color-accent-dark);

Â  Â  Â  Â  Â  Â  transform: translateY(-1px);

Â  Â  Â  Â  }

Â  Â  Â  Â  #modalConferma button:last-of-type { /* Annulla */

Â  Â  Â  Â  Â  Â  background-color: #ccc;

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  }

Â  Â  Â  Â  #modalConferma button:last-of-type:hover {

Â  Â  Â  Â  Â  Â  background-color: #bbb;

Â  Â  Â  Â  Â  Â  transform: translateY(-1px);

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per il messaggio di avviso "multi operai" */

Â  Â  Â  Â  .warning-message {

Â  Â  Â  Â  Â  Â  margin-bottom: 10px;

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  Â  Â  background: var(--color-warning-bg);

Â  Â  Â  Â  Â  Â  border-left: 5px solid var(--color-warning-border);

Â  Â  Â  Â  Â  Â  padding: 12px;

Â  Â  Â  Â  Â  Â  border-radius: var(--border-radius-base);

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  }

Â  Â  Â  Â  .warning-message strong {

Â  Â  Â  Â  Â  Â  color: var(--color-warning);

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per Riepilogo Admin */

Â  Â  Â  Â  #riepilogoAdmin {

Â  Â  Â  Â  Â  Â  background-color: white;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  border-radius: 10px;

Â  Â  Â  Â  Â  Â  box-shadow: var(--shadow-medium);

Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-border);

Â  Â  Â  Â  Â  Â  margin-top: 30px;

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoAdmin h3 {

Â  Â  Â  Â  Â  Â  color: var(--color-primary-dark);

Â  Â  Â  Â  Â  Â  border-bottom: 1px solid var(--color-border); /* Bordo piÃ¹ sottile */

Â  Â  Â  Â  Â  Â  padding-bottom: 10px;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  text-align: left; /* Allinea a sinistra */

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoAdmin h4 {

Â  Â  Â  Â  Â  Â  margin-top: 20px;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 8px;

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  Â  Â  font-size: 17px;

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoAdmin #riepilogoCompilati h4::before { content: 'âœ…'; }

Â  Â  Â  Â  #riepilogoAdmin #riepilogoMancanti h4::before { content: 'â›”'; }



Â  Â  Â  Â  #riepilogoAdmin ul {

Â  Â  Â  Â  Â  Â  list-style: none; /* Rimuove i pallini di default */

Â  Â  Â  Â  Â  Â  padding-left: 0;

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoAdmin li {

Â  Â  Â  Â  Â  Â  padding: 8px 0;

Â  Â  Â  Â  Â  Â  border-bottom: 1px dashed var(--color-border);

Â  Â  Â  Â  Â  Â  color: var(--color-text-dark);

Â  Â  Â  Â  }

Â  Â  Â  Â  #riepilogoAdmin li:last-child {

Â  Â  Â  Â  Â  Â  border-bottom: none;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Responsive adjustments */

Â  Â  Â  Â  @media (max-width: 600px) {

Â  Â  Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  Â  Â  padding: 10px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  Â  Â  padding: 0;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  input, select, button {

Â  Â  Â  Â  Â  Â  Â  Â  padding: 12px;

Â  Â  Â  Â  Â  Â  Â  Â  font-size: 15px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  #notifica {

Â  Â  Â  Â  Â  Â  Â  Â  width: calc(100% - 40px);

Â  Â  Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  Â  Â  padding: 14px 20px;

Â  Â  Â  Â  Â  Â  Â  Â  bottom: 15px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  #modalConferma > div {

Â  Â  Â  Â  Â  Â  Â  Â  margin: 50px 10px;

Â  Â  Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  </style>

</head>

<body>

Â  Â  <div class="container">

Â  Â  Â  Â  <datalist id="suggerimentiLavorazioni"></datalist>



Â  Â  Â  Â  <div id="notifica">

Â  Â  Â  Â  Â  Â  âœ… <strong>Dati inseriti correttamente</strong>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div id="benvenuto">

Â  Â  Â  Â  Â  Â  <div id="messaggioBenvenuto"></div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div id="login" class="card">

Â  Â  Â  Â  Â  Â  <h2>ğŸ” Login</h2>

Â  Â  Â  Â  Â  Â  <input type="text" id="user" placeholder="ğŸ”‘ Utente">

Â  Â  Â  Â  Â  Â  <input type="password" id="pass" placeholder="ğŸ”’ Password">

Â  Â  Â  Â  Â  Â  <button onclick="login()">ğŸ”“ Accedi</button>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div id="form" style="display:none;">

Â  Â  Â  Â  Â  Â  <h3>ğŸ“… Compila Presenza</h3>



Â  Â  Â  Â  Â  Â  <label class="section-label" for="data">Data:</label>

Â  Â  Â  Â  Â  Â  <input type="date" id="data">



Â  Â  Â  Â  Â  Â  <div style="display:flex; flex-wrap:wrap; gap:15px; margin-top:15px;">

Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="section-label" for="oreExtra">â• Ore extra:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="oreExtra">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="0" selected>0</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1">1</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">2</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">3</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="4">4</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="5">5</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="6">6</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="7">7</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="8">8</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="9">9</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="10">10</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="section-label" for="numeroCantieri">ğŸ—ï¸ Cantieri:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="numeroCantieri" onchange="generaCampiCantieri()">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1" selected>1</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="2">2</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="3">3</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="4">4</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="5">5</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div id="cantieriMultipli"></div>



Â  Â  Â  Â  Â  Â  <button id="btnMultiOperai" onclick="mostraOperai()">ğŸ‘ğŸ¼â€‹ Inserisci dati per altri operai</button>



Â  Â  Â  Â  Â  Â  <div id="multiOperai" class="card" style="display:none; margin-top:20px;">

Â  Â  Â  Â  Â  Â  Â  Â  <p class="warning-message">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  âš ï¸ Agli operai selezionati verranno applicate le stesse lavorazioni indicate sopra.

Â  Â  Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  Â  Â  <label class="section-label" for="operaio">ğŸ‘¥ Seleziona altri operai:</label>

Â  Â  Â  Â  Â  Â  Â  Â  <select id="operaio" multiple size="6"></select>



Â  Â  Â  Â  Â  Â  Â  Â  <div style="margin-top:15px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="section-label" for="nuovoOperaio">â• Oppure inserisci un nuovo operaio:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="nuovoOperaio" placeholder="ğŸ‘· Inserisci nuovo operaio">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <button onclick="mostraModal()" id="btnInvia">ğŸ“„ Invia Presenza</button>

Â  Â  Â  Â  Â  Â  <button id="btnGestione" onclick="window.location.href='gestione.html'">ğŸ“… Vai alla Gestione Cantiere</button>



Â  Â  Â  Â  Â  Â  <div id="ultimaLavorazioneBox">

Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size: 24px; color: var(--color-primary);">âœ¨</span>

Â  Â  Â  Â  Â  Â  Â  Â  <div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>La tua ultima lavorazione registrata:</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong id="ultimaLavorazione">Caricamento...</strong>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div id="ultimi7" class="card">

Â  Â  Â  Â  Â  Â  Â  Â  <h4>Recentemente:</h4>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <script>

Â  Â  Â  Â  Â  Â  let utente = "";

Â  Â  Â  Â  Â  Â  let nomeOperaio = "";

Â  Â  Â  Â  Â  Â  let ultimoTestoLavorazione = "";

Â  Â  Â  Â  Â  Â  let elencoCantieri = [];



Â  Â  Â  Â  Â  Â  function login() {

Â  Â  Â  Â  Â  Â  Â  Â  const userInput = document.getElementById("user").value.trim();

Â  Â  Â  Â  Â  Â  Â  Â  const passInput = document.getElementById("pass").value.trim();



Â  Â  Â  Â  Â  Â  Â  Â  fetch("https://opensheet.elk.sh/1glvkWLOpUhdBUmY4j-2DJoXQvY6dnQD_OQkYYCaXXEQ/Utenti")

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(r => r.json())

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(data => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const utenteTrovato = data.find(r => r["User"] === userInput && r["Password"] === passInput);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (utenteTrovato) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  utente = utenteTrovato["User"];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nomeOperaio = utenteTrovato["Nome"];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ruolo = utenteTrovato["Ruolo"] || "";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem("ruolo", ruolo);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("messaggioBenvenuto").innerText = `Benvenuto, ${nomeOperaio}`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (ruolo.toLowerCase() !== "amministratore") {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("btnGestione").style.display = "none";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("login").style.display = "none";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("form").style.display = "block";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("data").value = new Date().toISOString().split("T")[0];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  caricaUltimaLavorazione(utente);



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  caricaCantieri();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  caricaOperai();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  caricaUltimi7();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  caricaRiepilogoAdmin();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generaCampiCantieri();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("Credenziali errate");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function caricaCantieri() {

Â  Â  Â  Â  Â  Â  Â  Â  fetch("https://opensheet.elk.sh/1glvkWLOpUhdBUmY4j-2DJoXQvY6dnQD_OQkYYCaXXEQ/Cantieri")

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(r => r.json())

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(data => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  elencoCantieri = data

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .filter(r => r["Cantiere"])

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .map(r => r["Cantiere"]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generaCampiCantieri(); // Carica i cantieri dopo aver popolato l'array

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function caricaOperai() {

Â  Â  Â  Â  Â  Â  Â  Â  fetch("https://opensheet.elk.sh/1glvkWLOpUhdBUmY4j-2DJoXQvY6dnQD_OQkYYCaXXEQ/Utenti")

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(r => r.json())

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(data => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const select = document.getElementById("operaio");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  select.innerHTML = "";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data.forEach(r => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (r["Nome"]) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const opt = document.createElement("option");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opt.value = r["Nome"];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opt.textContent = r["Nome"];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  select.appendChild(opt);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function mostraCantiereLibero(index) {

Â  Â  Â  Â  Â  Â  Â  Â  const div = document.getElementById(`cantiereLibero_${index}`);

Â  Â  Â  Â  Â  Â  Â  Â  div.style.display = (div.style.display === "block") ? "none" : "block";

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function generaCampiCantieri() {

Â  Â  Â  Â  Â  Â  Â  Â  const nCantieri = parseInt(document.getElementById("numeroCantieri").value);

Â  Â  Â  Â  Â  Â  Â  Â  const container = document.getElementById("cantieriMultipli");

Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = "";



Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 1; i <= nCantieri; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let selectHtml = `<select id="cantiere_${i}">`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectHtml += `<option value="">-- Seleziona Cantiere --</option>`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  elencoCantieri.forEach(nome => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectHtml += `<option value="${nome}">${nome}</option>`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selectHtml += `</select>`;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML += `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" style="margin-top: 15px; padding: 15px;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="section-label" for="cantiere_${i}">ğŸ—ï¸ Cantiere ${i}:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${selectHtml}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="mostraCantiereLibero(${i})" id="btnCantiereAltro">ğŸ  Cantiere non presente</button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="cantiereLibero_${i}" style="display:none;">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="cantiereAltro_${i}" placeholder="ğŸ¢ Inserisci nome cantiere ${i}">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="importaBox">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>ğŸ’…â€‹ Lavorazioni eseguite per cantiere ${i}</h4>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="sottotitolo">ğŸ’¡ Scegli tra le lavorazioni recenti o scrivine una nuova:</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="importa-riga">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input list="suggerimentiLavorazioni" id="lavorazione_${i}" placeholder="ğŸ§ â€‹ Lavorazioni e suggerimenti" />

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("btnMultiOperai").style.display = (nCantieri === 1) ? "inline-block" : "none";

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function mostraOperai() {

Â  Â  Â  Â  Â  Â  Â  Â  const div = document.getElementById("multiOperai");

Â  Â  Â  Â  Â  Â  Â  Â  div.style.display = (div.style.display === "block") ? "none" : "block";

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function invia() {

Â  Â  Â  Â  Â  Â  Â  Â  const numeroCantieri = parseInt(document.getElementById("numeroCantieri").value);

Â  Â  Â  Â  Â  Â  Â  Â  const data = document.getElementById("data").value;

Â  Â  Â  Â  Â  Â  Â  Â  const orari = "08:00 - 17:00";

Â  Â  Â  Â  Â  Â  Â  Â  const oreExtra = parseInt(document.getElementById("oreExtra").value) || 0;



Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 1; i <= numeroCantieri; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let nomeCantiere = document.getElementById(`cantiere_${i}`)?.value || "";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const nomeCantiereAltro = document.getElementById(`cantiereAltro_${i}`)?.value.trim() || "";



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (nomeCantiereAltro) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nomeCantiere = nomeCantiereAltro;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let lavorazioneCantiere = document.getElementById(`lavorazione_${i}`)?.value || "";



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!nomeCantiere || !lavorazioneCantiere) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(`âš ï¸ Devi compilare cantiere e lavorazione per la riga ${i}`);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let oreCalcolate = 8 / numeroCantieri;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // se Ã¨ l'ultimo cantiere, aggiunge le ore extra

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (i === numeroCantieri) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  oreCalcolate += oreExtra;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let operaiSelezionati = [];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (document.getElementById("multiOperai").style.display === "block") {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  operaiSelezionati = Array.from(document.getElementById("operaio").selectedOptions).map(opt => opt.value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const nuovo = document.getElementById("nuovoOperaio").value.trim();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (nuovo) operaiSelezionati.push(nuovo);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (operaiSelezionati.length === 0) operaiSelezionati = [nomeOperaio];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  operaiSelezionati = [nomeOperaio];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  operaiSelezionati.forEach(nome => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dati = {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  orari,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cantiere: nomeCantiere,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lavorazione: lavorazioneCantiere,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ore: oreCalcolate,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  operaio: nome,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  user: utente

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fetch("https://script.google.com/macros/s/AKfycbybSXuBklZxyoyvo-FvV-UZ280WBygR8wMRTAO97dl8h6_g8-_VjDtBa2uPrVOf2nmI6Q/exec", {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: "POST",

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mode: "no-cors",

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(dati),

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function caricaUltimi7() {

Â  Â  Â  Â  Â  Â  Â  Â  fetch("https://script.google.com/macros/s/AKfycbybSXuBklZxyoyvo-FvV-UZ280WBygR8wMRTAO97dl8h6_g8-_VjDtBa2uPrVOf2nmI6Q/exec?checkPresenze=1&opName=" + encodeURIComponent(nomeOperaio))

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(r => r.json())

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(dati => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let html = "<h4>Recentemente:</h4>";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (dati.presenze && dati.presenze.length > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html += "<ul>";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dati.presenze.forEach(r => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html += `<li>${r.data} | ${r.orari} | ${r.cantiere} | ${r.lavorazione}</li>`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html += "</ul>";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html += "<p>Nessun dato trovato</p>";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("ultimi7").innerHTML = html;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function caricaUltimaLavorazione(username) {

Â  Â  Â  Â  Â  Â  Â  Â  fetch(`https://script.google.com/macros/s/AKfycbybSXuBklZxyoyvo-FvV-UZ280WBygR8wMRTAO97dl8h6_g8-_VjDtBa2uPrVOf2nmI6Q/exec?getLastWork=1&username=${username}`)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(r => r.text())

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .then(data => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const el = document.getElementById("ultimaLavorazione");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (data && data.trim() !== "") {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  el.textContent = data;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ultimoTestoLavorazione = data;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  el.textContent = "(Nessuna lavorazione trovata)";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ultimoTestoLavorazione = "";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function mostraModal() {

Â  Â  Â  Â  Â  Â  Â  Â  const orariBase = "08:00 - 17:00";

Â  Â  Â  Â  Â  Â  Â  Â  const oreExtra = parseInt(document.getElementById("oreExtra").value) || 0;

Â  Â  Â  Â  Â  Â  Â  Â  let orari = orariBase;

Â  Â  Â  Â  Â  Â  Â  Â  if (oreExtra > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  orari += ` + ${oreExtra} ore extra`;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  const data = document.getElementById("data").value;



Â  Â  Â  Â  Â  Â  Â  Â  let operai = "";

Â  Â  Â  Â  Â  Â  Â  Â  if (document.getElementById("multiOperai").style.display === "block") {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const selezione = document.getElementById("operaio");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const selezionati = Array.from(selezione.selectedOptions).map(opt => opt.value);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const nuovo = document.getElementById("nuovoOperaio").value.trim();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (nuovo) selezionati.push(nuovo);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  operai = selezionati.length > 0 ? selezionati.join(", ") : nomeOperaio;

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  operai = nomeOperaio;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  const numeroCantieri = parseInt(document.getElementById("numeroCantieri").value);

Â  Â  Â  Â  Â  Â  Â  Â  let dettagliCantieri = "";



Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 1; i <= numeroCantieri; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let nomeCantiere = document.getElementById(`cantiere_${i}`)?.value || "(nessuno)";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const nomeCantiereAltro = document.getElementById(`cantiereAltro_${i}`)?.value.trim() || "";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (nomeCantiereAltro) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nomeCantiere = nomeCantiereAltro;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const lavorazione = document.getElementById(`lavorazione_${i}`)?.value || "(nessuna)";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dettagliCantieri += `<li><strong>Cantiere ${i}:</strong> ${nomeCantiere}<br><strong>Lavorazione:</strong> ${lavorazione}</li>`;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  const riepilogoHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Data:</strong> ${data}</li>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Orari:</strong> ${orari}</li>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Operai:</strong> ${operai}</li>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><strong>Dettaglio Cantieri:</strong>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul>${dettagliCantieri}</ul>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>

Â  Â  Â  Â  Â  Â  Â  Â  `;



Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("riepilogoDati").innerHTML = riepilogoHTML;

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("modalConferma").style.display = "flex"; // Usa flex per centrare

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("modalConferma").classList.add("show"); // Aggiungi classe per animazione

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function chiudiModal() {

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("modalConferma").classList.remove("show"); // Rimuovi classe per animazione

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("modalConferma").style.display = "none";

Â  Â  Â  Â  Â  Â  Â  Â  }, 300); // Corrisponde alla durata della transizione

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function confermaInvio() {

Â  Â  Â  Â  Â  Â  Â  Â  chiudiModal(); // Chiude la modale

Â  Â  Â  Â  Â  Â  Â  Â  invia();Â  Â  Â  Â // Esegue la funzione di invio vera e propria



Â  Â  Â  Â  Â  Â  Â  Â  // Mostra la notifica

Â  Â  Â  Â  Â  Â  Â  Â  const n = document.getElementById("notifica");

Â  Â  Â  Â  Â  Â  Â  Â  n.style.display = "block";

Â  Â  Â  Â  Â  Â  Â  Â  n.classList.add("show");



Â  Â  Â  Â  Â  Â  Â  Â  // Nasconde la notifica dopo 4 secondi

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  n.classList.remove("show");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  n.style.display = "none";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 500); // Deve corrispondere alla transizione CSS

Â  Â  Â  Â  Â  Â  Â  Â  }, 3500);



Â  Â  Â  Â  Â  Â  Â  Â  // Resetta i campi dopo invio

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("data").value = new Date().toISOString().split("T")[0];

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("oreExtra").value = "0";

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("numeroCantieri").value = "1";
